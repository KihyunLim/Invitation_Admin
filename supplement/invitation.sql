-- 관리자
CREATE TABLE ADMIN (
	ID VARCHAR(20) PRIMARY KEY
	, PASSWORD VARCHAR(20) NOT NULL
);

INSERT INTO 
	ADMIN
VALUES
	("root", "1234")
;

SELECT * FROM ADMIN;


-- 사용자
CREATE TABLE USERES (
	ID VARCHAR(20) PRIMARY KEY
	, PASSWORD VARCHAR(20) NOT NULL
	, NAME VARCHAR(20) NOT NULL
	, PHONE VARCHAR(11) NOT NULL
	, DATETIME_REGISTER TIMESTAMP DEFAULT NOW()
);

INSERT INTO
	USERES
VALUES
	("test0", "qwer", "영유저", "01011112222", NULL)
	, ("test1", "asdf", "일유저", "01022223333", NULL)
	, ("test2", "zxcv", "이유저", "01033334444", NULL)
	, ("test3", "wert", "삼유저", "01044445555", NULL)
	, ("test4", "sdfg", "사유저", "01055556666", NULL)
;

SELECT * FROM USERES;


-- 청첩장 양식
CREATE TABLE INVITATION_FORM (
	FORMCODE VARCHAR(10) PRIMARY KEY
	, FORMNAME VARCHAR(10) NOT NULL
);

INSERT INTO
	INVITATION_FORM
VALUES
	("hookup", "hookup")
;

SELECT * FROM INVITATION_FORM;


-- 청첩장 목록
CREATE TABLE INVITATION_LIST (
	SEQ INT PRIMARY KEY AUTO_INCREMENT
	, ID VARCHAR(20) NOT NULL
	, NAME VARCHAR(20) NOT NULL
	, VISABLE VARCHAR(1) DEFAULT 'N'
	, DATE_BEGIN VARCHAR(8) NOT NULL
	, DATE_END VARCHAR(8) NOT NULL
	, FORMCODE VARCHAR(10) NOT NULL
	, FOREIGN KEY (ID) REFERENCES USERES (ID)
	, FOREIGN KEY (FORMCODE) REFERENCES INVITATION_FORM (FORMCODE)
);

INSERT INTO
	INVITATION_LIST
VALUES
	(NULL, "test0", "영유저", "N", "20191201", "20191225", "hookup")
	, (NULL, "test3", "삼유저", "Y", "20191229", "20200229", "hookup")
	, (NULL, "test2", "이유저", "N", "20200301", "20200512", "hookup")
;

SELECT * FROM INVITATION_LIST;


-- 청첩장 카테고리 분류 (첨부파일이 있는)
CREATE TABLE CATEGORY (
	CODE VARCHAR(5) PRIMARY KEY
	, NAME VARCHAR(15) NOT NULL
);

INSERT INTO
	CATEGORY
VALUES
	-- ("MI", "메인 및 기본 정보")
	-- ("LS", "LOVE STORY")
	-- ("G", "GALLERY")
;

SELECT * FROM CATEGORY;


-- 첨부파일 모음
-- 첨부파일(이미지, 썸네일) 싸그리 모으는 테이블로 하고 각 메뉴 테이블 컬럼에 첨부파일명 같이 넣어주기
CREATE TABLE ATTACH (
	SEQ INT
	, FULLNAME VARCHAR(150) PRIMARY KEY
	, CATEGORY VARCHAR(5)
	, DATETIME_REGISTER TIMESTAMP DEFAULT NOW()
	, FOREIGN KEY (CATEGORY) REFERENCES CATEGORY(CODE)
);

SELECT * FROM ATTACH;


-- 메인 및 기본 정보 
-- ATTACH에 넣었던거 트리거 같은걸로 안넣어 지려나??
CREATE TABLE MAIN_INFO (
	SEQ INT PRIMARY KEY
	, ID VARCHAR(20) NOT NULL
	, DATE_WEDDING VARCHAR(8) NOT NULL
	, TIME_WEDDING VARCHAR(4) NOT NULL
	, X_PLACE VARCHAR(30) NOT NULL
	, Y_PLACE VARCHAR(30) NOT NULL
	, ROAD_ADDR_PART1 VARCHAR(30) NOT NULL
	, JIBUN_ADDR VARCHAR(30) NOT NULL
	, ADDR_DETAIL VARCHAR(30) NOT NULL
	, CONTENT_GROOM VARCHAR(1000) NOT NULL
	, CONTENT_BRIDE VARCHAR(1000) NOT NULL
	, IMG_MAIN VARCHAR(150) DEFAULT ''
	, YN_EACH_IMG VARCHAR(1) DEFAULT 'N'
	, IMG_GROOM VARCHAR(150) DEFAULT ''
	, IMG_BRIDE VARCHAR(150) DEFAULT ''
	, FOREIGN KEY (SEQ) REFERENCES INVITATION_LIST (SEQ)
	, FOREIGN KEY (ID) REFERENCES USERES (ID)
);

INSERT INTO
	MAIN_INFO
VALUES
	(1, "test0", "20191220", "1000", "958312.8430575368", "1946055.0089419535", "서울특별시 강남구 학동로 158", "서울특별시 강남구 논현동 127-2 율암빌딩", "2층", "누구의 차남", "누구의 차녀", "", "N", "", "")
	, (2, "test3", "20191225", "1300", "967868.67319358", "1934771.4323645737", "경기도 성남시 분당구 벌말로39번길 13", "경기도 성남시 분당구 야탑동 302-9", "204호", "소오오오오개", "소오오오오개", "", "N", "", "")
	, (3, "test2", "20200228", "1100", "917327.0029600007", "1620377.7687504846", "전라남도 해남군 해남읍 군청길 27", "전라남도 해남군 해남읍 수성리 184-1 금영아파트", "103호", "누구의 차남2222", "누구의 차녀222", "", "N", "", "")
;

SELECT * FROM MAIN_INFO;


-- LOVE STORY
CREATE TABLE LOVE_STORY (
	SEQ INT PRIMARY KEY AUTO_INCREMENT
	, INV_SEQ INT NOT NULL
	, ID VARCHAR(20) NOT NULL
	, IS_USE BOOLEAN
	, IS_DELETE BOOLEAN
	, DATE_STORY VARCHAR(8) NOT NULL
	, TITLE VARCHAR(20) NOT NULL
	, CONTENT VARCHAR(200) NOT NULL
	, IMAGE VARCHAR(150) DEFAULT ''
	, FOREIGN KEY (INV_SEQ) REFERENCES INVITATION_LIST (SEQ)
	, FOREIGN KEY (ID) REFERENCES USERES (ID)
);

SELECT * FROM LOVE_STORY;


-- WHEN WHERE
CREATE TABLE WHEN_WHERE (
	SEQ INT NOT NULL
	, ID VARCHAR(20) NOT NULL
	, IS_PYEBAEK BOOLEAN
	, DATE_WW VARCHAR(8) DEFAULT '-'
	, TIME_WW VARCHAR(4) DEFAULT '-'
	, X_PLACE VARCHAR(30) DEFAULT '-'
	, Y_PLACE VARCHAR(30) DEFAULT '-'
	, ROAD_ADDR_PART1 VARCHAR(30) DEFAULT '-'
	, JIBUN_ADDR VARCHAR(30) DEFAULT '-'
	, ADDR_DETAIL VARCHAR(30) DEFAULT '-'
	, TITLE VARCHAR(20) NOT NULL
	, CONTENT VARCHAR(100) NOT NULL
	, FOREIGN KEY (SEQ) REFERENCES INVITATION_LIST (SEQ)
	, FOREIGN KEY (ID) REFERENCES INVITATION_LIST (ID)
);

INSERT INTO
	WHEN_WHERE
VALUES
	(1, "test0", FALSE, '-', '-', '-', '-', '-', '-', '-', "결혼장소1", "결혼장소내용1")
	, (2, "test3", FALSE, '-', '-', '-', '-', '-', '-', '-', "결혼장소2", "결혼장소내용2")
	, (3, "test2", FALSE, '-', '-', '-', '-', '-', '-', '-', "결혼장소3", "결혼장소내용3")
;

SELECT * FROM WHEN_WHERE;


-- GALLERY
CREATE TABLE GALLERY (
	SEQ INT PRIMARY KEY AUTO_INCREMENT
	, INV_SEQ INT NOT NULL
	, ID VARCHAR(20) NOT NULL
	, IS_USE BOOLEAN
	, IS_DELETE BOOLEAN
	, IMAGE VARCHAR(150) DEFAULT ''
	, FOREIGN KEY (INV_SEQ) REFERENCES INVITATION_LIST (SEQ)
	, FOREIGN KEY (ID) REFERENCES USERES (ID)
);

SELECT * FROM GALLERY;


-- SWEET MESSAGE
CREATE TABLE SWEET_MESSAGE (
	SEQ INT PRIMARY KEY AUTO_INCREMENT
	, INV_SEQ INT NOT NULL
	, ID VARCHAR(20) NOT NULL
	, IS_USE BOOLEAN
	, IS_DELETE BOOLEAN
	, DATETIME_REGISTER TIMESTAMP DEFAULT NOW()
	, REGISTER_NAME VARCHAR(20) NOT NULL
	, REGISTER_CONTENT VARCHAR(100) NOT NULL
	, REGISTER_PASSWORD VARCHAR(20) NOT NULL
	, FOREIGN KEY (INV_SEQ) REFERENCES INVITATION_LIST (SEQ)
	, FOREIGN KEY (ID) REFERENCES USERES (ID)
);

INSERT INTO
	SWEET_MESSAGE
VALUES
	(NULL, 1, "test0", TRUE, FALSE, NULL, "GUEST1", "CON1", "1111")
	, (NULL, 2, "test3", TRUE, FALSE, NULL, "GUEST2", "CON2", "2222")
	, (NULL, 2, "test3", TRUE, FALSE, NULL, "GUEST3", "CON3", "3333")
	, (NULL, 2, "test3", TRUE, FALSE, NULL, "GUEST4", "CON4", "4444")
;

SELECT * FROM SWEET_MESSAGE;