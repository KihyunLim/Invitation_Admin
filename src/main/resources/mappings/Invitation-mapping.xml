<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="InvitationDAO">
	<select id="getMemberInfo" resultType="memberInfo">
		SELECT
			ID,
			NAME
		FROM
			USERES
		WHERE
			ID = #{id}
			AND DELETEFLAG = 'N'
		;
	</select>
	
	<select id="getLastInsertID" resultType="int">
		SELECT
			LAST_INSERT_ID()
		;
	</select>
	
	<insert id="registerInvitation">
		INSERT INTO
			INVITATION_LIST(
				SEQ
				, ID
				, NAME
				, VISIBLE
				, DATE_BEGIN
				, DATE_END
				, FORMCODE
				, USE_EACH_IMAGE
				, USE_LS
				, USE_PYEBAEK
				, USE_G
				, USE_SM
				, DATETIME_REGISTER
				, DATETIME_UPDATE
			) 
			VALUES (
				null
				, #{invitationVO.id}
				, (SELECT NAME FROM USERES WHERE ID=#{invitationVO.id})
				, #{invitationVO.visible}
				, #{invitationVO.periodBegin}
				, #{invitationVO.periodEnd}
				, #{invitationVO.formCode}
				, #{invitationVO.useEachImage}
				, #{invitationVO.useLS}
				, #{invitationVO.usePyebaek}
				, #{invitationVO.useG}
				, #{invitationVO.useSM}
				, null
				, null
			)
		;
	</insert>
</mapper>